{% extends 'core/base.html' %}
{% load widget_tweaks %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-md-5">
    <h2 class="text-center mb-4">
      {% if form.instance.pk %}Editar Produto{% else %}Novo Produto{% endif %}
    </h2>
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}

      <div class="mb-3">
        <label for="id_nome" class="form-label">Nome</label>
        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-box-seam"></i></span>
          {{ form.nome|add_class:"form-control" }}
        </div>
      </div>

      <div class="mb-3">
        <label for="id_descricao" class="form-label">Descrição</label>
        {{ form.descricao|add_class:"form-control" }}
      </div>

      <div class="mb-3">
        <label for="id_preco" class="form-label">Preço</label>
        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-currency-dollar"></i></span>
          {{ form.preco|add_class:"form-control" }}
        </div>
      </div>

      <div class="mb-3">
        <label for="id_estoque" class="form-label">Estoque</label>
        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-123"></i></span>
          {{ form.estoque|add_class:"form-control" }}
        </div>
      </div>

      <div class="mb-3">
        <label for="id_imagem" class="form-label">Imagem do Produto</label>
      
        {% if form.instance.imagem %}
          <div class="mb-2 text-center">
            <img src="{{ form.instance.imagem.url }}" alt="Imagem atual" class="img-thumbnail" style="max-height: 150px;">
          </div>
        {% endif %}
      
        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-image"></i></span>
          <input type="file" name="imagem" id="id_imagem" class="form-control">
        </div>
      </div>
      
        {% endif %}

        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-image"></i></span>
          {{ form.imagem|add_class:"form-control" }}
        </div>
      </div>

      <button type="submit" class="btn btn-primary w-100">Salvar</button>
      <a href="{% url 'lista_produtos' %}" class="btn btn-link w-100 mt-2">Cancelar</a>
    </form>
  </div>
</div>
{% endblock %}
