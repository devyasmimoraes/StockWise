{% extends 'core/base.html' %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-md-5">
    <h2 class="text-center mb-4">Cadastro de Usuário</h2>
    <form method="post" id="registroForm" novalidate>
      {% csrf_token %}

      <div class="form-floating mb-3">
        <input type="text" name="username" id="id_username" class="form-control" placeholder="Usuário" required>
        <label for="id_username"><i class="bi bi-person-fill"></i> Usuário</label>
      </div>

      <div class="form-floating mb-3">
        <input type="email" name="email" id="id_email" class="form-control" placeholder="Email">
        <label for="id_email"><i class="bi bi-envelope-fill"></i> Email</label>
      </div>

      <div class="form-floating mb-3">
        <input type="password" name="password1" id="id_password1" class="form-control" placeholder="Senha" required>
        <label for="id_password1"><i class="bi bi-lock-fill"></i> Senha</label>
      </div>

      <div class="form-floating mb-3">
        <input type="password" name="password2" id="id_password2" class="form-control" placeholder="Confirme a senha" required>
        <label for="id_password2"><i class="bi bi-shield-lock-fill"></i> Confirmar Senha</label>
      </div>

      <button type="submit" class="btn btn-primary w-100">Registrar</button>
    </form>

    <div class="text-center mt-3">
      <a href="{% url 'login' %}" class="btn btn-link">Já tem conta? Faça login</a>
    </div>
  </div>
</div>

<script>
  const form = document.getElementById('registroForm');

  form.addEventListener('submit', function (event) {
    let valido = true;

    ['id_username', 'id_password1', 'id_password2'].forEach(id => {
      const campo = document.getElementById(id);
      if (!campo.value.trim()) {
        campo.classList.add('is-invalid');
        valido = false;
      } else {
        campo.classList.remove('is-invalid');
        campo.classList.add('is-valid');
      }
    });

    if (!valido) {
      event.preventDefault();
    }
  });
</script>
{% endblock %}
